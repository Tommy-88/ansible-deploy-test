<h1>Ansible проект</h1>
В директории <p1>/env</p1> представленны inventory файлы 


<h2>Плэйбуки</h2>
В общем счете имеется 5 плейбуков на каждый отдельный сервис и 1 мастер плейбук

<p>install.yml Определяет какие плейбуки должны быть запущенны в данном воркфлоу<br>
create_user: Создает пользователя, выделяет рабочую директорию<br>
install_nginx_web_server: Устанавливает веб сервер, конфигурирует прокси<br>
install_mysql: Ставит MySql при использовании Asible роли , создает базу, создвет юзера<br>
install_reqirements_packages: Устанавливает пакеты, необходимые для работы приложения <br>
install_guestbook: Устанавливает приложение и добавляет его в systemd</p>
<h2>Шаблоны</h2>
Шаблоны лежат в директории templates и представляют собой 3 файла: файл конфигурации для nginx, файл для systemd сервиса, и файл приложения config.py

ps. Так как нельзя было использовать роли, то для дефолтных переменных я создал файлик в плейбуках, чтобы не писать в плейбуках полный путь до него; для установки базы Mysql воспользовался ролью https://github.com/geerlingguy/ansible-role-mysql, но немного неверно определил ее в структуре репозитория(она должна скачиваться отдельно через requirements)
<h2> Хэндлеры</h2>
Обработчики указаны в поле handlers внизу плейбуков, где они были нужны. К сожалению без использования ролей хендлеры не удалось разместить в отдельном файле что соответствовало бы "best practice" 

<h2>Воспроизведение</h2>
<p>Для выполнения плейбука необходимо:<br>
1. Склонировать данный репозиторий на устройство с установленным дистрибутивом Ansible<br>
2.  Обеспечить доступ к машине, на которой будет выполнятся развертывание<br>
3.  В папке host_vars создать файл по типу имя_машины.yml и определить базовые переменные ansible_host ansible_user; добавить имя машины в hosts.txt<br>
4.  При необходимости в файле из п. 3 можно переопределить переменные окружения, которые обьявлены в файле variables<br>
5.  Для запуска перейти в директорию с Ansible проектом и выполнить команду ansible-playbook /playbooks/install.yml<br>
6.  При необходимости отладки определенных сервисов в файле install.yml закоментировать плейбуки, которые не должны учавствовать в воркфлоу<br>
7. После выполнения плейбука приложение будет доступно по url: guestbook.example</p>
